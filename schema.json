{
  "$schema": "http://json-schema.org/draft-04/hyper-schema",
  "type": "object",
  "links": [
    {
      "description": "Info for existing room.",
      "href": "/api/room",
      "method": "GET",
      "rel": "Info for existing room.",
      "targetSchema": {
        "$ref": "#/definitions/Room"
      }
    },
    {
      "description": "Info for existing rooms.",
      "href": "/api/rooms",
      "method": "GET",
      "rel": "Info for existing rooms.",
      "targetSchema": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/Room"
        }
      }
    },
    {
      "description": "Create a new room.",
      "href": "/api/rooms",
      "method": "POST",
      "rel": "Create a new room.",
      "targetSchema": {
        "$ref": "#/definitions/Room"
      }
    },
    {
      "description": "Info for existing game.",
      "href": "/api/game",
      "method": "GET",
      "rel": "Info for existing game.",
      "targetSchema": {
        "$ref": "#/definitions/Game"
      }
    },
    {
      "description": "Get current user.",
      "href": "/api/user",
      "method": "GET",
      "rel": "Get current user.",
      "targetSchema": {
        "$ref": "#/definitions/User"
      }
    },
    {
      "description": "Create a new user.",
      "href": "/api/user",
      "method": "POST",
      "rel": "Create a new user.",
      "targetSchema": {
        "$ref": "#/definitions/User"
      }
    }
  ],
  "definitions": {
    "Hand": {
      "type": "object",
      "properties": {
        "tiles": {
          "description": "tiles of hand",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Tile"
          }
        }
      }
    },
    "Game": {
      "type": "object",
      "properties": {
        "id": {
          "description": "unique identifier of game",
          "type": "integer"
        },
        "round_number": {
          "description": "round number of game",
          "type": "integer",
          "minimum": 1,
          "maximum": 4
        },
        "bonus_count": {
          "description": "bonus count of game",
          "type": "integer",
          "minimum": 0
        },
        "seats": {
          "description": "seats of game",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Seat"
          }
        },
        "links": {
          "type": "object",
          "properties": {
            "confirm_game_end": {
              "$ref": "#/definitions/ConfirmGameEnd"
            },
            "confirm_round_end": {
              "$ref": "#/definitions/ConfirmRoundEnd"
            },
            "discard": {
              "$ref": "#/definitions/Discard"
            },
            "draw": {
              "$ref": "#/definitions/Draw"
            },
            "self_pick": {
              "$ref": "#/definitions/SelfPick"
            }
          }
        }
      }
    },
    "Discard": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of discard",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "type": "null"
        }
      }
    },
    "ConfirmRoundEnd": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of action",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "properties": {
            "message": {
              "description": "message",
              "type": "string"
            },
            "position": {
              "$ref": "#/definitions/Wind"
            },
            "tiles": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Tile"
              }
            },
            "base_point": {
              "description": "base point",
              "type": "integer",
              "minimum": 0
            }
          },
          "type": "object"
        }
      }
    },
    "ConfirmGameEnd": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of action",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "properties": {
            "message": {
              "description": "message",
              "type": "string"
            },
            "winner": {
              "$ref": "#/definitions/User"
            },
            "results": {
              "description": "results",
              "type": "array",
              "items": {
                "$ref": "#/definitions/Result"
              }
            }
          },
          "type": "object"
        }
      }
    },
    "Draw": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of draw",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "type": "null"
        }
      }
    },
    "SelfPick": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of self pick",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "type": "null"
        }
      }
    },
    "Room": {
      "type": "object",
      "properties": {
        "id": {
          "description": "unique identifier of room",
          "type": "integer"
        },
        "game": {
          "$ref": "#/definitions/Game"
        },
        "users": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/User"
          }
        },
        "links": {
          "type": "object",
          "properties": {
            "join": {
              "$ref": "#/definitions/Join"
            },
            "start": {
              "$ref": "#/definitions/Start"
            }
          }
        }
      }
    },
    "Join": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of start",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "type": "null"
        }
      }
    },
    "Start": {
      "type": "object",
      "properties": {
        "url": {
          "description": "url of start",
          "type": "string",
          "format": "uri"
        },
        "meta": {
          "description": "meta info",
          "type": "null"
        }
      }
    },
    "Wind": {
      "type": "string",
      "enum": [
        "east",
        "south",
        "west",
        "north"
      ]
    },
    "Tile": {
      "type": "object",
      "properties": {
        "id": {
          "description": "unique identifier of tile",
          "type": "integer"
        },
        "kind": {
          "description": "kind of tile",
          "type": "string",
          "enum": [
            "east",
            "south",
            "west",
            "north",
            "chun",
            "hatsu",
            "haku",
            "man_1",
            "man_2",
            "man_3",
            "man_4",
            "man_5",
            "man_6",
            "man_7",
            "man_8",
            "man_9",
            "sou_1",
            "sou_2",
            "sou_3",
            "sou_4",
            "sou_5",
            "sou_6",
            "sou_7",
            "sou_8",
            "sou_9",
            "pin_1",
            "pin_2",
            "pin_3",
            "pin_4",
            "pin_5",
            "pin_6",
            "pin_7",
            "pin_8",
            "pin_9"
          ]
        },
        "order": {
          "description": "order of tile",
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "River": {
      "type": "object",
      "properties": {
        "tiles": {
          "description": "tiles of river",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Tile"
          }
        }
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "description": "unique identifier of user",
          "type": "string"
        },
        "name": {
          "description": "name of user",
          "type": "string"
        },
        "game": {
          "$ref": "#/definitions/Game"
        },
        "room": {
          "$ref": "#/definitions/Room"
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Result": {
      "type": "object",
      "properties": {
        "point": {
          "description": "point",
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "Seat": {
      "type": "object",
      "properties": {
        "point": {
          "description": "point of seat",
          "type": "integer"
        },
        "hand": {
          "$ref": "#/definitions/Hand"
        },
        "river": {
          "$ref": "#/definitions/River"
        },
        "user": {
          "$ref": "#/definitions/User"
        },
        "position": {
          "$ref": "#/definitions/Wind"
        }
      }
    }
  }
}
